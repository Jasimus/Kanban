@{
    ViewData["Title"] = "Detalle de tablero";
    int idUsuario = (int)Context.Session.GetInt32("idUsuario");
    string display = "none";
}
@using Kanban.Models
@model TableroVM_space.TableroVM



<style>
    #ventana
    {
        overflow: auto;
        border: 1px solid black;
        background-color: rgb(223, 223, 223);
        padding: 0px;
    }

    .hover-container
    {
        position: relative;
        overflow: visible;
    }

    h2
    {
        text-align: center;
        padding-top: 1%;
        padding-bottom: 1%;
        width: 100%;
    }

    ul#lista-ventana
    {
        list-style: none;
        padding: 5%;
    }

    li#button
    {
        border-radius: 8px;
        padding: 2%;
        margin-bottom: 8px;
    }
</style>


<header class="mb-5">
    <h1>Tablero: @Model.Tablero.Nombre</h1>
</header>

<div class="descripcion mb-3 p-2">
    <h3>Descripci√≥n</h3>
    <p>@Model.Tablero.Descripcion</p>
</div>

@if(@Model.Tablero.IdUsuarioPropietario == idUsuario)
{
    <a asp-action="CrearTarea" asp-controller="Tareas" asp-route-idTablero="@Model.Tablero.Id" class="btn btn-success mb-3">Crear Tarea</a>
}

<div class="row">
    <div class="col" id="ventana">
        <h2 style="background-color: @Model.EstadoTareaColor[1];">Ideas</h2>
        <ul id="lista-ventana">
            @foreach(var t in @Model.Ideas)
            {
                <li class="hover-container" id="button" style="background-color: @t.Color;">
                    <div class="w-100">
                        <p>@t.Nombre</p>
                    </div>
                    <div class="w-100 d-inline-block">
                        <a asp-action="DetalleTarea" asp-controller="Tareas" class="btn btn-warning" asp-route-id="@t.Id">Detalle</a>
                    </div>
                    <p id="custom-tooltip" class="d-none">@t.Descripcion</p>
                </li>
            }
        </ul>
    </div>

    <div class="col" id="ventana">
        <h2 style="background-color: @Model.EstadoTareaColor[2];">ToDo</h2>
        <ul id="lista-ventana">
            @foreach(var t in @Model.ToDo)
            {
                <li class="hover-container" id="button" style="background-color: @t.Color;">
                    <div class="w-100">
                        <p>@t.Nombre</p>
                    </div>
                    <div class="w-100">
                        <a asp-action="DetalleTarea" asp-controller="Tareas" class="btn btn-warning" asp-route-id="@t.Id">Detalle</a>
                    </div>
                    <p id="custom-tooltip" class="d-none">@t.Descripcion</p>
                </li>
            }
        </ul>
    </div>

    <div class="col" id="ventana">
        <h2 style="background-color: @Model.EstadoTareaColor[3];">Doing</h2>
        <ul id="lista-ventana">
            @foreach(var t in @Model.Doing)
            {
                <li class="hover-container" id="button" style="background-color: @t.Color;">
                    <div class="w-100">
                        <p>@t.Nombre</p>
                    </div>
                    <div class="w-100">
                        <a asp-action="DetalleTarea" asp-controller="Tareas" class="btn btn-warning" asp-route-id="@t.Id">Detalle</a>
                    </div>
                    <p id="custom-tooltip" class="d-none">@t.Descripcion</p>
                </li>
            }
        </ul>
    </div>

    <div class="col" id="ventana">
        <h2 style="background-color: @Model.EstadoTareaColor[4];">Reviw</h2>
        <ul id="lista-ventana">
            @foreach(var t in @Model.Review)
            {
                <li class="hover-container" id="button" style="background-color: @t.Color;">
                    <div class="w-100">
                        <p>@t.Nombre</p>
                    </div>
                    <div class="w-100">
                        <a asp-action="DetalleTarea" asp-controller="Tareas" class="btn btn-warning" asp-route-id="@t.Id">Detalle</a>
                    </div>
                    <p id="custom-tooltip" class="d-none">@t.Descripcion</p>
                </li>
            }
        </ul>
    </div>

    <div class="col" id="ventana">
        <h2 style="background-color: @Model.EstadoTareaColor[5];">Done</h2>
        <ul id="lista-ventana">
            @foreach(var t in @Model.Done)
            {
                <li class="hover-container" id="button" style="background-color: @t.Color;">
                    <div class="w-100">
                        <p>@t.Nombre</p>
                    </div>
                    <div class="w-100">
                        <a asp-action="DetalleTarea" asp-controller="Tareas" class="btn btn-warning" asp-route-id="@t.Id">Detalle</a>
                    </div>
                    <p id="custom-tooltip" class="d-none">@t.Descripcion</p>
                </li>
            }
        </ul>
    </div>
</div>

@if(@Model.Tablero.IdUsuarioPropietario == idUsuario)
{
    <a asp-action="EliminarTablero" asp-controller="Tableros" asp-route-id="@Model.Tablero.Id" class="btn btn-danger mt-3">Eliminar tablero</a>
}


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Inicializar tooltip con un elemento personalizado
    const button = document.getElementById('button');
    const customTooltip = document.getElementById('custom-tooltip');

    new bootstrap.Tooltip(button, {
      customClass: 'my-custom-tooltip', // Clase personalizada
      html: true, // Permite contenido HTML en el tooltip
      title: customTooltip.innerHTML, // Contenido del tooltip
    });
</script>